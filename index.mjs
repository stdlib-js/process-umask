// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import{isPrimitive as t}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/string-left-pad@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";var l={0:"rwx",1:"rw",2:"rx",3:"r",4:"wx",5:"w",6:"x",7:""};function f(r){var t;return r=r.toString(8),r=n(r,4,"0"),t="",t+="u="+l[r[1]],t+=",",t+="g="+l[r[2]],t+=",",t+="o="+l[r[3]]}var h=/^(u{0,1}g{0,1}o{0,1}a{0,1}|)([+\-=])(r{0,1}w{0,1}x{0,1})$/,d={r:2,w:1,x:0},g={s:0,u:1,g:2,o:3};function c(r){return 1<<r>>>0}function p(r,t){return(r&~c(t))>>>0}function a(r,t){var e,s,i,o,l,f,a,j,b,u,w,y;for(e=n(r.toString(8),4,"0").split(""),u=0;u<e.length;u++)e[u]=parseInt(e[u],10);for(s=t.split(","),u=0;u<s.length;u++){if(null===(l=s[u].match(h)))return new Error(m("0Om7C",t));if(""===(o=l[1]))o="ugo";else{for(j="",y=0;y<o.length;y++)"a"===o[y]?j+="ugo":j+=o[y];o=j}if(a=l[2],i=l[3],"-"===a){if(""===i)continue;for(w=0;w<i.length;w++)for(b=d[i[w]],y=0;y<o.length;y++)e[f=g[o[y]]]=(e[f]|c(b))>>>0}else if("+"===a){if(""===i)continue;for(w=0;w<i.length;w++)for(b=d[i[w]],y=0;y<o.length;y++)e[f=g[o[y]]]=p(e[f],b)}else if(""===i)for(y=0;y<o.length;y++)e[f=g[o[y]]]=7;else{for(y=0;y<o.length;y++)e[f=g[o[y]]]=7;for(w=0;w<i.length;w++)for(b=d[i[w]],y=0;y<o.length;y++)e[f=g[o[y]]]=p(e[f],b)}}for(u=0;u<e.length;u++)e[u]=e[u].toString();return parseInt(e.join(""),8)}function j(){var n,m,l,h,d;if(0===(m=arguments.length))return 0;if(h={},d=arguments[0],1===m){if(r(d)){if((l=a(0,d))instanceof Error)throw l;return 0}if(t(d))return 0;if(s(d)){if(i(d,"symbolic")&&(h.symbolic=d.symbolic,!e(h.symbolic)))throw new TypeError(o("0Om30","symbolic",h.symbolic));return l=0,h.symbolic&&(l=f(l)),l}throw new TypeError(o("0Om7A",d))}if(!s(n=arguments[1]))throw new TypeError(o("0Om2h",n));if(i(n,"symbolic")&&(h.symbolic=n.symbolic,!e(h.symbolic)))throw new TypeError(o("0Om30","symbolic",h.symbolic));if(r(d)){if((l=a(0,d))instanceof Error)throw l}else{if(!t(d))throw new TypeError(o("0Om7B",d));l=d}return l=0,h.symbolic&&(l=f(l)),l}export{j as default};
//# sourceMappingURL=index.mjs.map
