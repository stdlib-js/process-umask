// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/string-left-pad@esm/index.mjs";function l(e){if(e.__esModule)return e;var r=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function u(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}var m=u,c=f;function h(e){if(m===setTimeout)return setTimeout(e,0);if((m===u||!m)&&setTimeout)return m=setTimeout,setTimeout(e,0);try{return m(e,0)}catch(r){try{return m.call(null,e,0)}catch(r){return m.call(this,e,0)}}}"function"==typeof a.setTimeout&&(m=setTimeout),"function"==typeof a.clearTimeout&&(c=clearTimeout);var d,p=[],g=!1,v=-1;function b(){g&&d&&(g=!1,d.length?p=d.concat(p):v=-1,p.length&&w())}function w(){if(!g){var e=h(b);g=!0;for(var r=p.length;r;){for(d=p,p=[];++v<r;)d&&d[v].run();v=-1,r=p.length}d=null,g=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===f||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(r){try{return c.call(null,e)}catch(r){return c.call(this,e)}}}(e)}}function y(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];p.push(new j(e,r)),1!==p.length||g||h(w)}function j(e,r){this.fun=e,this.array=r}j.prototype.run=function(){this.fun.apply(null,this.array)};var T={},x=[],k={},E={},O={};function _(){}var L=_,P=_,M=_,D=_,N=_,V=_,A=_;function S(e){throw new Error("process.binding is not supported")}function z(){return"/"}function I(e){throw new Error("process.chdir is not supported")}function F(){return 0}var U=a.performance||{},$=U.now||U.mozNow||U.msNow||U.oNow||U.webkitNow||function(){return(new Date).getTime()};function q(e){var r=.001*$.call(U),t=Math.floor(r),n=Math.floor(r%1*1e9);return e&&(t-=e[0],(n-=e[1])<0&&(t--,n+=1e9)),[t,n]}var B=new Date;function C(){return(new Date-B)/1e3}var G={nextTick:y,title:"browser",browser:true,env:T,argv:x,version:"",versions:k,on:L,addListener:P,once:M,off:D,removeListener:N,removeAllListeners:V,emit:A,binding:S,cwd:z,chdir:I,umask:F,hrtime:q,platform:"browser",release:E,config:O,uptime:C},H=s,J={0:"rwx",1:"rw",2:"rx",3:"r",4:"wx",5:"w",6:"x",7:""};var K=function(e){var r;return e=e.toString(8),e=H(e,4,"0"),r="",r+="u="+J[e[1]],r+=",",r+="g="+J[e[2]],r+=",",r+="o="+J[e[3]]},Q=i,R=s,W=/^(u{0,1}g{0,1}o{0,1}a{0,1}|)([+\-=])(r{0,1}w{0,1}x{0,1})$/,X={r:2,w:1,x:0},Y={s:0,u:1,g:2,o:3};function Z(e){return 1<<e>>>0}function ee(e,r){return(e&~Z(r))>>>0}var re=function(e,r){var t,n,o,i,s,l,a,u,f,m,c,h;for(t=R(e.toString(8),4,"0").split(""),m=0;m<t.length;m++)t[m]=parseInt(t[m],10);for(n=r.split(","),m=0;m<n.length;m++){if(null===(s=n[m].match(W)))return new Error(Q('invalid argument. Unable to parse mask expression. Ensure the expression is properly formatted, only uses the class letters "u", "g", "o", and "a", only uses the operators "+", "-", and "=", and only uses the permission symbols "r", "w", and "x". Value: `%s`.',r));if(""===(i=s[1]))i="ugo";else{for(u="",h=0;h<i.length;h++)"a"===i[h]?u+="ugo":u+=i[h];i=u}if(a=s[2],o=s[3],"-"===a){if(""===o)continue;for(c=0;c<o.length;c++)for(f=X[o[c]],h=0;h<i.length;h++)t[l=Y[i[h]]]=(t[l]|Z(f))>>>0}else if("+"===a){if(""===o)continue;for(c=0;c<o.length;c++)for(f=X[o[c]],h=0;h<i.length;h++)t[l=Y[i[h]]]=ee(t[l],f)}else if(""===o)for(h=0;h<i.length;h++)t[l=Y[i[h]]]=7;else{for(h=0;h<i.length;h++)t[l=Y[i[h]]]=7;for(c=0;c<o.length;c++)for(f=X[o[c]],h=0;h<i.length;h++)t[l=Y[i[h]]]=ee(t[l],f)}}for(m=0;m<t.length;m++)t[m]=t[m].toString();return parseInt(t.join(""),8)},te=l(Object.freeze({__proto__:null,addListener:P,argv:x,binding:S,browser:true,chdir:I,config:O,cwd:z,default:G,emit:A,env:T,hrtime:q,nextTick:y,off:D,on:L,once:M,platform:"browser",release:E,removeAllListeners:V,removeListener:N,title:"browser",umask:F,uptime:C,version:"",versions:k})),ne=e.isPrimitive,oe=r.isPrimitive,ie=t.isPrimitive,se=n,le=o,ae=i,ue=K,fe=re;var me=function(){var e,r,t,n,o;if(0===(r=arguments.length))return te.umask();if(n={},o=arguments[0],1===r){if(ne(o)){if((t=fe(te.umask(),o))instanceof Error)throw t;return te.umask(t)}if(oe(o))return te.umask(o);if(se(o)){if(le(o,"symbolic")&&(n.symbolic=o.symbolic,!ie(n.symbolic)))throw new TypeError(ae("invalid option. `%s` option must be a boolean. Option: `%s`.","symbolic",n.symbolic));return t=te.umask(),n.symbolic&&(t=ue(t)),t}throw new TypeError(ae("invalid argument. Must provide either a string, nonnegative integer, or an options object. Value: `%s`.",o))}if(!se(e=arguments[1]))throw new TypeError(ae("invalid argument. Options argument must be an object. Value: `%s`.",e));if(le(e,"symbolic")&&(n.symbolic=e.symbolic,!ie(n.symbolic)))throw new TypeError(ae("invalid option. `%s` option must be a boolean. Option: `%s`.","symbolic",n.symbolic));if(ne(o)){if((t=fe(te.umask(),o))instanceof Error)throw t}else{if(!oe(o))throw new TypeError(ae("invalid argument. First argument must be either a string or nonnegative integer. Value: `%s`.",o));t=o}return t=te.umask(t),n.symbolic&&(t=ue(t)),t};export{me as default};
//# sourceMappingURL=index.mjs.map
